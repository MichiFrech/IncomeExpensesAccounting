<h2 class="content-block">Payments</h2>
<dx-popup [width]="450" [height]="500" [showTitle]="true" title="Change Category" [dragEnabled]="false"
    [closeOnOutsideClick]="true" [(visible)]="showCategory">
    <div>
        TODO
    </div>
</dx-popup>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<div class="dx-card content-block responsive-paddings">

    <mat-horizontal-stepper>
        <ng-template matStepperIcon="edit">
            <mat-icon>done</mat-icon>
        </ng-template>
        <mat-step label="Upload CSV">
            <div class="content-area">
                <ngx-dropzone #dropzone [label]="'Drop your files here or click.'" [multiple]="false"
                    [accept]="'application/vnd.ms-excel,text/csv'" [disabled]="disableDropzone"
                    (filesAdded)="onFilesAdded($event)">
                </ngx-dropzone>
                <div class="dropzone-btn">
                    <button class="right" style="margin-left: 5px;" mat-raised-button
                        [disabled]="!disableDropzone || disableButtons" color="primary" (click)="uploadFiles()">Upload
                        {{getFilesCount()}}
                        File(s)</button>
                    <button class="right" mat-raised-button [disabled]="!disableDropzone || disableButtons"
                        (click)="cancleUpload()">Cancle</button><br>
                </div>
            </div>
            <div>
                <button mat-raised-button disabled="true">Back</button>
                <button class="right" color="primary" mat-raised-button matStepperNext>Next</button>
            </div>
        </mat-step>
        <mat-step label="Check Category">
            <div class="content-area">
                <table mat-table [dataSource]="payments">
                    <ng-container matColumnDef="bookingdate">
                        <th mat-header-cell *matHeaderCellDef>Bookingdate</th>
                        <td class="bookingDate-column" mat-cell *matCellDef="let payment">{{payment.bookingDate}}</td>
                    </ng-container>
                    <ng-container matColumnDef="amount">
                        <th mat-header-cell *matHeaderCellDef>Amount</th>
                        <td mat-cell *matCellDef="let payment">{{payment.amount}}</td>
                    </ng-container>
                    <ng-container matColumnDef="currency">
                        <th mat-header-cell *matHeaderCellDef>Currency</th>
                        <td class="currency-column" mat-cell *matCellDef="let payment">{{payment.currency}}</td>
                    </ng-container>
                    <ng-container matColumnDef="bookingtext">
                        <th mat-header-cell *matHeaderCellDef>Bookingtext</th>
                        <td mat-cell *matCellDef="let payment">{{payment.bookingText}}</td>
                    </ng-container>
                    <ng-container matColumnDef="category">
                        <th mat-header-cell *matHeaderCellDef>Category</th>
                        <td mat-cell *matCellDef="let payment"><button mat-button
                                [style.backgroundColor]="getBackground(payment.category.id)"
                                (click)="showCategoryView()">{{payment.category.name}}</button>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
            </div>
            <div>
                <button mat-raised-button matStepperPrevious>Back</button>
                <button class="right" color="primary" mat-raised-button matStepperNext>Next</button>
            </div>
        </mat-step>
        <mat-step label="Write-off">
            <div class="content-area">
                Content
            </div>
            <div>
                <button mat-raised-button matStepperPrevious>Back</button>
                <button class="right" color="primary" mat-raised-button matStepperNext [disabled]="true">Commit</button>
            </div>
        </mat-step>
    </mat-horizontal-stepper>
</div>